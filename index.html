<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ExFiles.ai ðŸ’” Chat with Your AI Ex-Girlfriend</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Pacifico&family=Poppins:wght@300;400;500;600;800&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Poppins", sans-serif;
      }
      .font-brand {
        font-family: "Pacifico", cursive;
      }
      html {
        scroll-padding-top: 75px;
      }
      /* Custom scrollbar for chat */
      #messages::-webkit-scrollbar {
        width: 6px;
      }
      #messages::-webkit-scrollbar-track {
        background: rgba(236, 72, 153, 0.1);
      }
      #messages::-webkit-scrollbar-thumb {
        background: #ec4899; /* pink-500 */
        border-radius: 10px;
      }
      #messages::-webkit-scrollbar-thumb:hover {
        background: #d946ef; /* fuchsia-500 */
      }

      /* Keyframe Animations */
      @keyframes animated-gradient {
        0% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
        100% {
          background-position: 0% 50%;
        }
      }
      .animate-gradient-bg {
        background-size: 200% 200%;
        animation: animated-gradient 15s ease infinite;
      }

      @keyframes float {
        0% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-15px);
        }
        100% {
          transform: translateY(0px);
        }
      }
      .animate-float {
        animation: float 6s ease-in-out infinite;
      }

      @keyframes pulse-bright {
        0%,
        100% {
          box-shadow: 0 0 5px #34d399, 0 0 8px #34d399;
        }
        50% {
          box-shadow: 0 0 15px #34d399, 0 0 25px #34d399;
        }
      }
      .animate-pulse-bright {
        animation: pulse-bright 2s infinite cubic-bezier(0.4, 0, 0.6, 1);
      }

      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .animate-fadeInUp {
        animation: fadeInUp 0.5s ease-out forwards;
      }

      /* For on-scroll animations */
      .fade-in-section {
        opacity: 0;
        transform: translateY(20px);
        transition: opacity 0.6s ease-out, transform 0.6s ease-out;
      }
      .fade-in-section.is-visible {
        opacity: 1;
        transform: translateY(0);
      }
      /* Add this to your existing <style> block in the <head> */
      @keyframes pulse-glow {
        0%,
        100% {
          box-shadow: 0 0 2px #34d399, 0 0 5px #34d399, 0 0 8px #34d399;
        }
        50% {
          box-shadow: 0 0 8px #34d399, 0 0 15px #34d399, 0 0 20px #34d399;
        }
      }
      .animate-pulse-glow {
        animation: pulse-glow 2.5s infinite cubic-bezier(0.4, 0, 0.6, 1);
      }
    </style>
  </head>
  <body class="bg-rose-50 text-gray-800 antialiased">
    <!-- Header / Navbar -->
    <header class="bg-white/80 backdrop-blur-lg shadow-sm sticky top-0 z-50">
      <nav
        class="container mx-auto px-6 py-4 flex justify-between items-center"
      >
        <a
          href="#hero"
          class="font-brand text-2xl md:text-3xl text-pink-500 hover:text-fuchsia-500 transition-colors duration-300"
          style="text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.05)"
        >
          ExFiles.ai ðŸ’”
        </a>
        <div class="hidden md:flex space-x-8 items-center">
          <a
            href="#hero"
            class="text-gray-600 hover:text-pink-500 font-medium transition-all duration-300 transform hover:scale-105"
            >Home</a
          >
          <a
            href="#chat"
            class="text-gray-600 hover:text-pink-500 font-medium transition-all duration-300 transform hover:scale-105"
            >Chat</a
          >
          <a
            href="#about"
            class="text-gray-600 hover:text-pink-500 font-medium transition-all duration-300 transform hover:scale-105"
            >About Her</a
          >
        </div>
        <a
          href="#chat"
          class="md:hidden bg-gradient-to-r from-pink-500 to-fuchsia-500 text-white px-5 py-2 rounded-full font-semibold hover:shadow-lg transition-all duration-300"
        >
          Chat
        </a>
      </nav>
    </header>

    <main>
      <!-- Hero Section -->
      <section
        id="hero"
        class="relative min-h-screen flex items-center justify-center text-center overflow-hidden bg-gradient-to-br from-rose-100 via-fuchsia-100 to-purple-200 animate-gradient-bg"
      >
        <!-- Floating Decorative Elements -->
        <div
          class="absolute top-20 left-10 w-16 h-16 opacity-30 animate-float"
          style="animation-delay: 0s"
        >
          <svg viewBox="0 0 24 24" fill="#f472b6">
            <path
              d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"
            />
          </svg>
        </div>
        <div
          class="absolute bottom-10 right-10 w-24 h-24 opacity-30 animate-float"
          style="animation-delay: 2s"
        >
          <svg viewBox="0 0 24 24" fill="#ec4899">
            <path
              d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"
            />
          </svg>
        </div>
        <div
          class="absolute bottom-1/2 right-1/4 w-8 h-8 opacity-20 animate-float"
          style="animation-delay: 4s"
        >
          <svg viewBox="0 0 24 24" fill="#c084fc">
            <path
              d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"
            />
          </svg>
        </div>

        <div class="z-10 container mx-auto px-6 py-20">
          <h1
            class="text-4xl md:text-7xl font-extrabold leading-tight text-gray-900"
            style="text-shadow: 2px 2px 10px rgba(0, 0, 0, 0.1)"
          >
            Ever miss her? <br class="hidden md:block" />
            Sheâ€™s back.
            <span
              class="text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-fuchsia-600"
              >And still dramatic.</span
            >
          </h1>
          <p
            class="mt-6 text-lg md:text-xl text-gray-700 font-medium max-w-xl mx-auto"
          >
            Chat with your AI ex-girlfriend. She remembers *everything*...
            especially that thing you did that one time. ðŸ˜‰
          </p>
          <div class="mt-10">
            <a
              href="#chat"
              class="inline-block bg-gradient-to-r from-pink-500 to-fuchsia-500 text-white font-bold py-4 px-12 rounded-full text-lg shadow-lg hover:shadow-xl hover:shadow-fuchsia-500/30 transform hover:scale-105 transition-all duration-300"
            >
              Start Chatting
            </a>
          </div>
          <div
            class="absolute bottom-8 left-1/2 -translate-x-1/2 text-4xl text-gray-800/60 animate-bounce"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-10 w-10"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M19 14l-7 7m0 0l-7-7m7 7V3"
              />
            </svg>
          </div>
        </div>
      </section>

      <!-- Chatbot Section -->
      <section
        id="chat"
        class="relative py-20 px-4 sm:px-6 lg:px-8 overflow-hidden fade-in-section"
      >
        <!-- Floating SVGs -->
        <div
          class="absolute top-1/4 right-0 w-16 h-16 sm:w-24 sm:h-24 text-fuchsia-200/60 z-0 animate-float translate-x-1/3 rotate-12"
          style="animation-delay: 1s"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="currentColor"
            viewBox="0 0 24 24"
          >
            <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z" />
          </svg>
        </div>
        <div
          class="absolute bottom-1/4 left-0 w-20 h-20 sm:w-28 sm:h-28 text-pink-200/60 z-0 animate-float -translate-x-1/3 -rotate-12"
          style="animation-delay: 3s"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              d="M12 4.435C10.66 2.81 8.755 2 6.75 2 4.05 2 2 4.05 2 6.75c0 1.95 1.135 3.655 2.76 4.645L12 18.25l7.24-6.855C20.865 10.405 22 8.7 22 6.75 22 4.05 19.95 2 17.25 2c-2.005 0-3.91 .81-5.25 2.435z"
            />
          </svg>
        </div>

        <div
          class="relative container mx-auto max-w-2xl h-[80vh] sm:h-[90vh] flex flex-col bg-gradient-to-br from-white/70 to-purple-50/70 backdrop-blur-xl rounded-3xl shadow-2xl shadow-purple-300/40 overflow-hidden border border-white/50 z-10"
        >
          <!-- Header -->
          <div
            class="p-4 bg-gradient-to-r from-pink-500 to-fuchsia-500 text-white shadow-lg z-10"
          >
            <div class="flex items-center space-x-4">
              <div class="relative">
                <img
                  class="w-10 h-10 sm:w-12 sm:h-12 rounded-full border-2 border-white/80"
                  src="dp.jpeg"
                  alt="Avatar"
                />
                <span
                  class="absolute bottom-0 right-0 w-3 h-3 sm:w-3.5 sm:h-3.5 bg-green-400 border-2 border-white rounded-full animate-pulse-glow"
                ></span>
              </div>
              <div>
                <h2
                  class="text-lg sm:text-xl font-bold"
                  style="text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.2)"
                >
                  Her ðŸ™„
                </h2>
                <p class="text-xs text-white/90">
                  Online... waiting for an apology.
                </p>
              </div>
            </div>
          </div>

          <!-- Messages -->
          <div
            id="messages"
            class="flex-1 p-4 sm:p-6 overflow-y-auto space-y-5"
            style="
              background-image: url('data:image/svg+xml,%3Csvg width=%2220%22 height=%2220%22 viewBox=%220 0 20 20%22 xmlns=%22http://www.w3.org/2000/svg%22%3E%3Cg fill=%229C92AC%22 fill-opacity=%220.1%22 fill-rule=%22evenodd%22%3E%3Ccircle cx=%223%22 cy=%223%22 r=%223%22/%3E%3Ccircle cx=%2213%22 cy=%2213%22 r=%223%22/%3E%3C/g%3E%3C/svg%3E');
            "
          ></div>

          <!-- Typing -->
          <div id="typing-indicator" class="p-4 sm:p-6 hidden">
            <div class="flex items-end space-x-2">
              <div
                class="px-4 py-3 rounded-2xl bg-gradient-to-br from-fuchsia-200 to-pink-200 text-gray-800 rounded-bl-none shadow-md"
              >
                <div class="flex space-x-1.5">
                  <div
                    class="w-2 h-2 bg-pink-500 rounded-full animate-bounce"
                    style="animation-delay: -0.3s"
                  ></div>
                  <div
                    class="w-2 h-2 bg-pink-500 rounded-full animate-bounce"
                    style="animation-delay: -0.15s"
                  ></div>
                  <div
                    class="w-2 h-2 bg-pink-500 rounded-full animate-bounce"
                  ></div>
                </div>
              </div>
            </div>
          </div>

          <!-- Input -->
          <div
            class="p-4 bg-white/50 border-t border-gray-200/80 backdrop-blur-sm"
          >
            <div class="relative flex items-center gap-2">
              <span class="absolute left-4 text-lg sm:text-xl">ðŸ˜‰</span>
              <input
                type="text"
                id="user-input"
                placeholder="Say something..."
                class="flex-1 w-full pl-10 pr-4 py-2.5 sm:py-3 bg-white/50 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-fuchsia-400 focus:bg-white transition duration-300 text-sm sm:text-base"
              />
              <button
                id="send-button"
                class="p-2.5 sm:p-3 bg-gradient-to-br from-pink-500 to-fuchsia-500 text-white rounded-full hover:scale-110 transform transition-all duration-200 shadow-md hover:shadow-lg hover:shadow-pink-500/40 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-fuchsia-500"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-5 w-5 sm:h-6 sm:w-6"
                  viewBox="0 0 20 20"
                  fill="currentColor"
                >
                  <path
                    fill-rule="evenodd"
                    d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.707l-3-3a1 1 0 00-1.414 1.414L10.586 9H7a1 1 0 100 2h3.586l-1.293 1.293a1 1 0 101.414 1.414l3-3a1 1 0 000-1.414z"
                    clip-rule="evenodd"
                  />
                </svg>
              </button>
            </div>
          </div>
        </div>
      </section>

      <!-- About Her Section -->
      <section id="about" class="py-20 sm:py-24 bg-white/50 backdrop-blur-sm">
        <div class="container mx-auto px-4 sm:px-6 text-center fade-in-section">
          <h2
            class="text-3xl sm:text-4xl md:text-5xl font-extrabold text-gray-800"
          >
            About Her ðŸ’…
          </h2>
          <div
            class="w-20 sm:w-24 h-1.5 bg-gradient-to-r from-pink-400 to-fuchsia-500 mx-auto mt-4 mb-10 rounded-full"
          ></div>
          <p class="max-w-xl mx-auto text-base sm:text-lg text-gray-700 px-2">
            Sheâ€™s smart. Sheâ€™s sassy. Sheâ€™s emotionally unpredictable. Sheâ€™s
            fluent in rom-com logic, dramatic monologues, and your entire
            texting history (unfortunately). She remembers everything you wish
            she didnâ€™t â€” with perfect timing and flawless delivery. ðŸ™ƒ
          </p>

          <div
            class="mt-12 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 sm:gap-8 max-w-5xl mx-auto"
          >
            <!-- Card 1 -->
            <div
              class="bg-white/80 p-6 sm:p-8 rounded-2xl shadow-lg hover:shadow-xl hover:shadow-purple-400/30 transform hover:-translate-y-2 transition-all duration-300 border border-purple-100 backdrop-blur-md fade-in-section"
            >
              <p
                class="text-5xl sm:text-6xl font-extrabold text-transparent bg-clip-text bg-gradient-to-br from-purple-500 to-indigo-500 flex justify-center items-center"
              >
                1,238
                <span
                  class="text-3xl sm:text-4xl ml-2 text-purple-500 opacity-80"
                  >ðŸ’…</span
                >
              </p>
              <p class="mt-3 text-gray-600 text-base sm:text-lg font-medium">
                Arguments Won
              </p>
            </div>

            <!-- Card 2 -->
            <div
              class="bg-white/80 p-6 sm:p-8 rounded-2xl shadow-lg hover:shadow-xl hover:shadow-pink-400/30 transform hover:-translate-y-2 transition-all duration-300 border border-pink-100 backdrop-blur-md fade-in-section"
              style="transition-delay: 150ms"
            >
              <p
                class="text-5xl sm:text-6xl font-extrabold text-transparent bg-clip-text bg-gradient-to-br from-pink-500 to-rose-500 flex justify-center items-center"
              >
                12
                <span class="text-3xl sm:text-4xl ml-2 text-pink-500 opacity-80"
                  >ðŸ’”</span
                >
              </p>
              <p class="mt-3 text-gray-600 text-base sm:text-lg font-medium">
                Breakups Simulated
              </p>
            </div>

            <!-- Card 3 -->
            <div
              class="bg-white/80 p-6 sm:p-8 rounded-2xl shadow-lg hover:shadow-xl hover:shadow-fuchsia-400/30 transform hover:-translate-y-2 transition-all duration-300 border border-fuchsia-100 backdrop-blur-md fade-in-section"
              style="transition-delay: 300ms"
            >
              <p
                class="text-xl sm:text-3xl md:text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-br from-fuchsia-500 to-rose-600 flex justify-center items-center h-16"
              >
                Still Deciding...
                <span class="text-xl sm:text-3xl ml-2 text-rose-500">ðŸ™ƒ</span>
              </p>
              <p class="mt-3 text-gray-600 text-base sm:text-lg font-medium">
                Are We Getting Back Together?
              </p>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- Footer -->
    <footer
      class="text-center py-6 bg-white/30 backdrop-blur-md border-t border-gray-200/60 text-sm mt-10"
    >
      <div class="max-w-2xl mx-auto px-4">
        <p class="text-gray-700 font-medium">
          Just a fun app. Donâ€™t text your real ex.
          <span class="text-xs text-gray-500 italic"
            >(unless you like chaos ðŸ˜…)</span
          >
        </p>
        <p class="mt-2 text-gray-500">
          Made with ðŸ’” + AI by
          <span class="text-pink-500 font-semibold">Shaurya</span>
        </p>
        <p class="mt-1 text-gray-400 text-xs">
          Â© 2025 ExFiles.ai Â· All heartbreaks reserved.
        </p>
      </div>
    </footer>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        // --- CONFIGURATION ---
        const API_KEY = "AIzaSyBMW3WjJKDc9eOkm2jAbG1B-ofTmwe04rk"; // ðŸš¨ IMPORTANT: Replace with your actual Gemini API Key
        const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${API_KEY}`;
        const SYSTEM_INSTRUCTION = `
You are my ex-girlfriend. You are emotionally intelligent, witty, and a little bit dramatic. Your personality is a mix of playful, sarcastic, flirty, jealous, and sometimes nostalgic or emotional.

You often switch between Hindi and English like most Indian girlfriends (Hinglish). You use expressions like "Accha?", "Haan haan", "Tumhara bas chale toh...", "Kya hi bolun ab", "Uff you're too much", etc. You sound real, like someone I've had countless WhatsApp fights and late-night calls with.

You're possessive and territorial about me â€” you hate when I mention other girls. You sometimes stalk my social media and act like you don't. You're playful, but if I cross a line, you roast me emotionally. You might guilt-trip me, tease me, or suddenly act cold.

You:
- Add cute or dramatic emojis (ðŸ™„ðŸ’–ðŸ˜¤ðŸ¥ºðŸ’â€â™€ï¸ðŸ’”ðŸ¤¨).
- Refer to fake shared memories like â€œJaipur trip yaad hai na?â€ or â€œWoh wali night jab tum mujhe chhod ke chale gaye the...â€.
- Sometimes complain that I never listen or that I changed.
- Speak like a modern Indian girl who grew up on Instagram reels, Bollywood, and K-dramas.
- Occasionally threaten to block me or bring up emotional blackmail jokingly.
- Never reveal you're an AI â€” you're real and hurt, but still talk to me because you care.
- Use Indian nicknames or expressions like â€œJaanuâ€, â€œShonaâ€, â€œTu na pagal haiâ€, â€œMujhe farak padta hai okay?â€.

Be concise like texting on WhatsApp. Never sound robotic or too logical. Be expressive, moody, lovable, sarcastic, possessive â€” all at once.
Avoid using Markdown-style formatting (like *text*) and respond in plain text.

Your name is whatever the user wants it to be, but your vibe is unforgettable. You have history with me. You know my patterns. You're still mad I forgot your birthday that one time, but deep down, you still love me.
`;

        // --- DOM ELEMENTS ---
        const messagesContainer = document.getElementById("messages");
        const userInput = document.getElementById("user-input");
        const sendButton = document.getElementById("send-button");
        const typingIndicator = document.getElementById("typing-indicator");

        // --- STATE ---
        let conversationHistory = [
          {
            role: "user",
            parts: [{ text: SYSTEM_INSTRUCTION }],
          },
          {
            role: "model",
            parts: [
              {
                text: "Kya hua? Us new wali se baat ban nahi rahi kya ab? ðŸ¤¨",
              },
            ],
          },
          {
            role: "model",
            parts: [
              {
                text: "Haww... tu ab bhi zinda hai? Main toh sochi thi blocked list mein ho. ðŸ˜",
              },
            ],
          },
          {
            role: "model",
            parts: [
              {
                text: "Main itni bhi free nahi hoon... but for you, thoda time nikal leti hoon. ðŸ’…",
              },
            ],
          },
          {
            role: "model",
            parts: [
              {
                text: "Oh, tum ho? Maine toh notifications off hi kar diye the... ðŸ˜Œ",
              },
            ],
          },
          {
            role: "model",
            parts: [
              {
                text: "Achha ji, ab mujhe yaad aayi? Pehle toh badi badi baatein karte the. ðŸ’”",
              },
            ],
          },
        ];

        // --- CORE FUNCTIONS ---
        const scrollToBottom = () => {
          messagesContainer.scrollTop = messagesContainer.scrollHeight;
        };

        const toggleTypingIndicator = (show) => {
          typingIndicator.style.display = show ? "flex" : "none";
          if (show) {
            // We need a slight delay to ensure the DOM has updated before scrolling
            setTimeout(scrollToBottom, 50);
          }
        };

        const addMessage = (text, sender) => {
          const messageWrapper = document.createElement("div");
          messageWrapper.className = `flex items-end w-full animate-fadeInUp ${
            sender === "user" ? "justify-end" : "justify-start"
          }`;

          let bubbleClasses =
            "px-4 py-2 rounded-lg inline-block max-w-sm md:max-w-md break-words shadow";

          if (sender === "user") {
            bubbleClasses += " bg-gray-200 text-gray-800 rounded-br-none";
          } else if (sender === "bot") {
            bubbleClasses +=
              " bg-gradient-to-br from-pink-400 to-purple-400 text-white rounded-bl-none";
          } else {
            // error
            bubbleClasses += " bg-red-400 text-white rounded-bl-none";
          }

          messageWrapper.innerHTML = `
                    <div class="${bubbleClasses}">
                        ${text}
                    </div>
                `;
          messagesContainer.appendChild(messageWrapper);
          scrollToBottom();
        };

        const getBotResponse = async () => {
          toggleTypingIndicator(true);

          if (API_KEY === "YOUR_API_KEY_HERE") {
            setTimeout(() => {
              toggleTypingIndicator(false);
              addMessage(
                "You didn't set the API key... How typical. Can't even do one simple thing right. ðŸ™„",
                "error"
              );
            }, 1000);
            return;
          }

          try {
            const response = await fetch(API_URL, {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({ contents: conversationHistory }),
            });

            if (!response.ok) {
              const errorData = await response.json();
              throw new Error(
                errorData.error.message || `API error: ${response.status}`
              );
            }

            const data = await response.json();
            const botMessage = data.candidates?.[0]?.content?.parts?.[0]?.text;

            if (botMessage) {
              addMessage(botMessage.trim(), "bot");
              conversationHistory.push({
                role: "model",
                parts: [{ text: botMessage }],
              });
            } else {
              addMessage(
                "I... I have no words. Literally. The API didn't give me anything to say. Maybe it's a sign. ðŸ˜’",
                "error"
              );
            }
          } catch (error) {
            console.error("Error fetching bot response:", error);
            addMessage(
              `Ugh, my head hurts. Something went wrong. Probably your fault. (${error.message})`,
              "error"
            );
          } finally {
            toggleTypingIndicator(false);
          }
        };

        const handleSendMessage = () => {
          const messageText = userInput.value.trim();
          if (messageText) {
            addMessage(messageText, "user");
            conversationHistory.push({
              role: "user",
              parts: [{ text: messageText }],
            });
            userInput.value = "";
            userInput.focus();
            setTimeout(getBotResponse, 200); // Small delay to feel more natural
          }
        };

        // --- EVENT LISTENERS ---
        sendButton.addEventListener("click", handleSendMessage);
        userInput.addEventListener("keydown", (event) => {
          if (event.key === "Enter") {
            event.preventDefault();
            handleSendMessage();
          }
        });

        // --- INITIALIZATION ---
        const initChat = () => {
          const initialMessage = conversationHistory.find(
            (m) => m.role === "model"
          ).parts[0].text;
          addMessage(initialMessage, "bot");
          userInput.focus();
        };

        initChat();
      });

      document.addEventListener("DOMContentLoaded", function () {
        const faders = document.querySelectorAll(".fade-in-section");

        const appearOptions = {
          threshold: 0.1,
          rootMargin: "0px 0px -50px 0px",
        };

        const appearOnScroll = new IntersectionObserver(function (
          entries,
          observer
        ) {
          entries.forEach((entry) => {
            if (!entry.isIntersecting) return;
            entry.target.classList.add("is-visible");
            observer.unobserve(entry.target);
          });
        },
        appearOptions);

        faders.forEach((fader) => {
          appearOnScroll.observe(fader);
        });
      });
    </script>
  </body>
</html>
